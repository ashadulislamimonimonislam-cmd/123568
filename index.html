<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AD FREE FIRE - SECURE ACCESS</title>
    <style>
        /* ব্যাকগ্রাউন্ড কালার চেঞ্জিং অ্যানিমেশন */
        @keyframes bgCycle {
            0% { background-color: #050a0f; }
            25% { background-color: #1a0d1a; }
            50% { background-color: #0d1a14; }
            75% { background-color: #0d141a; }
            100% { background-color: #050a0f; }
        }

        @keyframes btnGlow {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }

        body { 
            margin: 0; 
            min-height: 100vh; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
            animation: bgCycle 12s infinite linear; 
            color: #ffffff; 
            padding: 20px 0;
        }
        
        .container { 
            background: rgba(13, 17, 23, 0.95); 
            border: 1px solid #30363d; 
            padding: 25px; 
            border-radius: 20px; 
            width: 350px; 
            text-align: left; 
            box-shadow: 0 10px 50px rgba(0,0,0,1);
        }

        .header-box {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        .logo-img {
            width: 65px; height: 65px;
            border-radius: 12px; border: 1px solid #444;
            object-fit: cover; background: #161b22;
        }

        .live-time-box { font-size: 12px; color: #f2cc60; margin-bottom: 10px; font-family: monospace; background: rgba(242, 204, 96, 0.1); padding: 5px 10px; border-radius: 5px; display: inline-block; }
        .system-log { background: #010409; border-radius: 10px; padding: 15px; font-family: 'Courier New', Courier, monospace; font-size: 11px; color: #d2a8ff; margin-top: 10px; line-height: 1.5; border: 1px solid #21262d; }
        .log-time { color: #f2cc60; margin-right: 5px; }

        .btn { 
            background: #238636; 
            color: #ffffff; 
            border: none; 
            padding: 14px; 
            font-weight: bold; 
            cursor: pointer; 
            border-radius: 10px; 
            width: 100%; 
            margin-top: 20px;
            text-transform: uppercase; 
            text-decoration: none; 
            display: inline-block; 
            text-align: center;
            animation: btnGlow 5s infinite linear;
        }

        .tg-btn {
            background: #0088cc;
            margin-top: 10px;
            font-size: 12px;
            text-transform: none;
            animation: btnGlow 7s infinite linear;
        }

        .social-section { margin-top: 30px; padding-top: 20px; border-top: 1px solid #30363d; text-align: center; }
        .social-item { margin-bottom: 40px; display: block; text-decoration: none; }
        .social-logo {
            width: 150px; height: 150px;
            margin-bottom: 12px;
        }
        .social-text { display: block; font-size: 15px; color: #ffffff; font-weight: bold; line-height: 1.4; }

        #landingPage, #generatorPage { display: none; }
        #keyDisplay { text-align: center; padding: 15px; font-size: 20px; color: #58a6ff; background: #161b22; border-radius: 10px; margin: 15px 0; border: 1px solid #30363d; }
    </style>
</head>
<body>

    <div id="landingPage" class="container">
        <div class="header-box">
            <img src="https://i.supaimg.com/46dbfc30-50e2-42f9-8305-e5d132e1b867.jpg" class="logo-img" alt="Logo">
            <div class="header-text"><h2 style="margin:0; font-size:18px;">AD FREE FIRE - Key</h2></div>
        </div>
        <div class="live-time-box">Current Time: <span class="live-clock"></span></div>
        <div class="system-log">
            <div><span class="log-time" class="live-clock-log"></span> Click "GET VIP KEY" and complete steps.</div>
        </div>
        
        <a id="earningBtn" class="btn" href="#" target="_blank">GET VIP KEY NOW</a>
        
        <a href="https://t.me/+BX8lzcqIxdxlNjA1" class="btn tg-btn" target="_blank">
            টেলিগ্রাম চ্যানেলে জয়েন হন প্যানেল নেওয়ার জন্য
        </a>

        <div class="social-section">
            <a href="https://t.me/+BX8lzcqIxdxlNjA1" class="social-item" target="_blank">
                <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" class="social-logo" alt="Telegram">
                <span class="social-text">প্যানেল নিতে এখানে ক্লিক করুন</span>
            </a>
            <a href="https://chat.whatsapp.com/GGuydDXphFHAgJSCv97KEX" class="social-item" target="_blank">
                <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" class="social-logo" alt="WhatsApp">
                <span class="social-text">অফিশিয়াল হোয়াটসঅ্যাপ</span>
            </a>
            <a href="https://www.tiktok.com/@adfreefire999" class="social-item" target="_blank">
                <img src="https://p16-va.lemon8cdn.com/obj/eden-va2/uhp_v_shpw_v_uhp/tiktok_logo_new.png" class="social-logo" alt="TikTok">
                <span class="social-text">অফিশিয়াল টিকটক</span>
            </a>
        </div>
    </div>

    <div id="generatorPage" class="container">
        <div class="header-box">
            <img src="https://i.supaimg.com/46dbfc30-50e2-42f9-8305-e5d132e1b867.jpg" class="logo-img" alt="Logo">
            <div class="header-text"><h2 style="margin:0;">ACCESS GRANTED</h2></div>
        </div>
        <div id="keyDisplay">VERIFIED ACCESS</div>
        <button id="genBtn" class="btn" onclick="generateKey()">VERIFY NEW KEY</button>
        <button id="copyBtn" class="btn" style="display:none; background:#1f6feb;" onclick="copyKey()">COPY KEY</button>
        <p style="font-size:11px; color:#ff4d4d; text-align:center; margin-top:15px; font-weight:bold;">
            সাবধান: একবার পাসওয়ার্ড বের করলে পুনরায় পেতে আবার লিংক পার হয়ে আসতে হবে। ব্যাক বাটন কাজ করবে না।
        </p>
    </div>

<script>
    const EARNING_LINK = "https://linksgo.in/cq3hA";
    const REQUIRED_DOMAIN = "followyou.me";
    const AIRTABLE_TOKEN = "patn7xmqXpUwZql5B.0c757efdff357a4cf8eee80f5e2e28a0ad16e2e84e6d6493ab62a6da54131eae";
    const BASE_ID = "appbcvyIYXVAZzmom";
    const TABLE_ID = "tbl1pjDWPEnDOeym5";

    function updateClock() {
        const now = new Date();
        document.querySelectorAll('.live-clock').forEach(el => el.innerText = now.toLocaleTimeString());
    }
    setInterval(updateClock, 1000);

    // ব্যাক বাটন ব্লক এবং নতুন সিকিউরিটি চেক
    window.onload = function() {
        document.getElementById('earningBtn').href = EARNING_LINK;
        
        const isFromEarning = document.referrer.includes(REQUIRED_DOMAIN);
        const isVerified = sessionStorage.getItem('token_valid');

        // যদি আর্নিং লিংক থেকে আসে এবং আগে থেকে ভেরিফাই করা না থাকে
        if (isFromEarning && isVerified !== 'used') {
            document.getElementById('generatorPage').style.display = 'block';
            document.getElementById('landingPage').style.display = 'none';
        } else {
            // অন্য সব ক্ষেত্রে ল্যান্ডিং পেজে পাঠাবে
            document.getElementById('landingPage').style.display = 'block';
            document.getElementById('generatorPage').style.display = 'none';
        }
    };

    // ব্যাক বাটন প্রেস করলে বা ব্যাক করার চেষ্টা করলে এটি কাজ করবে
    window.onpageshow = function(event) {
        if (event.persisted) {
            window.location.reload(); 
        }
    };

    async function generateKey() {
        const genBtn = document.getElementById('genBtn');
        genBtn.innerText = "Processing...";
        const newKey = "AD FREE FIRE KEY-" + Math.random().toString(36).substring(2, 8).toUpperCase();
        
        try {
            const response = await fetch(`https://api.airtable.com/v0/${BASE_ID}/${TABLE_ID}`, {
                method: 'POST',
                headers: { 'Authorization': `Bearer ${AIRTABLE_TOKEN}`, 'Content-Type': 'application/json' },
                body: JSON.stringify({ "fields": { "Password": newKey } })
            });

            if (response.ok) {
                document.getElementById('keyDisplay').innerText = newKey;
                genBtn.style.display = 'none';
                document.getElementById('copyBtn').style.display = 'block';
                
                // পাসওয়ার্ড বের হওয়ার সাথে সাথে সেশন টোকেন 'used' করে দেওয়া হলো
                // এখন ব্যাক করলে বা পুনরায় আর্নিং লিংকের মাঝখান থেকে আসার চেষ্টা করলে সিস্টেম তাকে আর এলাও করবে না।
                sessionStorage.setItem('token_valid', 'used');
            }
        } catch (e) { alert("Error!"); }
    }

    function copyKey() {
        navigator.clipboard.writeText(document.getElementById('keyDisplay').innerText);
        alert("Key Copied! Now visit link again for next key.");
        // কপি করার পর পেজ রিলোড হয়ে যাবে যেন ইউজার আর এখানে থাকতে না পারে
        window.location.href = window.location.pathname; 
    }
</script>
</body>
</html>
